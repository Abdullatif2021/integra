<ng-template #modalRef let-modal>
  <div class="modal-container">
    <div class="modal-body">
      <ng-container *ngIf="data.method === 'filters' &&  !filtersCount && !confirmed; else ActualModal" >
        <div class="no-filters-warning-message">
            {{'home.modals.pre_new.filter_applied' | translate}}
        </div>
        <div class="btns-container mt-3">
          <button type="button" class="integraa-btn integraa-danger-btn ml-2 float-right" (click)="confirm()">{{'home.modals.pre_new.run' | translate}}</button>
          <button type="button" class="integraa-btn bg-light float-right" (click)="modal.close()">{{'home.modals.pre_new.go_out' | translate}}</button>
          <div class="clear-both"></div>
        </div>
      </ng-container>
      <ng-template #ActualModal>
        <h6>{{'home.modals.pre_new.create_one' | translate}}</h6>
        <div class="selected-count-confirm">
          {{'home.modals.pre_new.about_try' | translate}} <b *ngIf="data.method === 'selected'" >{{selectedCount}}</b><b *ngIf="data.method === 'filters'" >{{filteredProductsCount}}</b> {{'home.modals.pre_new.correct_quantity' | translate}}.
        </div>
        <div class="row mt-4">
          <div class="col-12 text-danger mb-2" *ngIf="error===1">{{'home.modals.pre_new.req_name' | translate}}</div>
          <div class="col-12 text-danger mb-2" *ngIf="error===2">{{'home.modals.pre_new.name_lenth1' | translate}}</div>
          <div class="col-8 align-self-center">
            <label>{{'home.modals.pre_new.ins_name' | translate}}</label>
            <input (change)="changeName($event)" type="text" class="form-control name-input" placeholder="{{'home.modals.pre_new.place_holder' | translate}}">
          </div>
        </div>

        <div class="btns-container mt-3">
          <button type="button" class="integraa-btn ml-2 float-right" (click)="run(modal, products_already_in_use)">{{'home.modals.pre_new.run' | translate}}</button>
          <button type="button" class="integraa-btn bg-light float-right" (click)="modal.close()">{{'home.modals.pre_new.go_out' | translate}}</button>
          <div class="clear-both"></div>
        </div>
      </ng-template>
    </div>
  </div>
</ng-template>
<ng-template  #products_already_in_use let-modal>
  <div class="modal-container nFoundItemModal">
    <div class="modal-body">
      <div class="cant-delete-now">
        {{'home.modals.pre_new.used_prod' | translate}}     
      </div>
      <div class="row mt-2">
        <div class="col-12 align-self-center">
          <div class="product-data" *ngFor="let item of products_with_errors">
            <div class="product-barcode ml-2 d-inline-block">{{ item.barcode }}</div>
          </div>
        </div>
      </div>
      <div class="btns-container mt-3">
        <button type="button" class="integraa-btn integraa-danger-btn ml-2 float-right" (click)="modal.close()">{{'home.modals.pre_new.ok' | translate}}</button>
        <div class="clear-both"></div>
      </div>
    </div>
  </div>
</ng-template>